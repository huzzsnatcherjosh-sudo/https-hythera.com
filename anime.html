<input type="text" id="search" placeholder="Search anime..." />
<div id="results"></div>

<script>
async function fetchAnime(query) {
  const res = await fetch('https://graphql.anilist.co', {
    method: 'POST',
    headers: { 'Content-Type': 'application/json' },
    body: JSON.stringify({
      query: `
        query ($q: String) {
          Page {
            media(search: $q, type: ANIME) {
              title { romaji english }
              coverImage { large }
              siteUrl
            }
          }
        }
      `,
      variables: { q: query }
    })
  });
  const data = await res.json();
  const results = document.getElementById('results');
  results.innerHTML = '';
  data.data.Page.media.forEach(anime => {
    const card = document.createElement('div');
    card.className = 'card';
    card.innerHTML = `
      <img src="${anime.coverImage.large}" />
      <h3>${anime.title.english || anime.title.romaji}</h3>
      <a href="${anime.siteUrl}" target="_blank">View on AniList</a>
    `;
    results.appendChild(card);
  });
}

document.getElementById('search').addEventListener('input', e => {
  fetchAnime(e.target.value);
});
</script>
